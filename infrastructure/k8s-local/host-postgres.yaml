# Bridges the kind cluster to your laptop's local Postgres at localhost:5432.
# Uses an Endpoints + headless Service so pods can reach "host-postgres:5432".
# The IP 172.17.0.1 is the host gateway inside kind (docker bridge default).
# If your docker bridge IP is different, the deploy_local.sh script patches it automatically.
apiVersion: v1
kind: Endpoints
metadata:
  name: host-postgres
subsets:
  - addresses:
      - ip: HOST_GATEWAY_IP   # replaced at deploy time by deploy_local.sh
    ports:
      - port: 5432
---
apiVersion: v1
kind: Service
metadata:
  name: host-postgres
spec:
  clusterIP: None   # headless â€” routes directly to Endpoints above
  ports:
    - port: 5432
      targetPort: 5432
